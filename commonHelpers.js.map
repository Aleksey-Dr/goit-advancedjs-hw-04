{"version":3,"file":"commonHelpers.js","sources":["../src/partials/js/fetchGallery.js","../src/partials/js/renderCards.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nimport { KEY_TO_API } from '../../main';\n\n// Add default value of a current page 'page='\nlet currentPage = 1;\n\n// Add asynchronous function\nexport async function fetchGallery(term, currentPage) {\n    // Add URL to Pixabay\n    // Parts URL\n    const frontURL = 'https://pixabay.com/api/?key=';\n    const betweenURL = '&q=';\n    // Add per_page=40 for change default value of quantity items in response\n    const backURL = '&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=';\n    // Complete URL\n    const url = frontURL + KEY_TO_API + betweenURL + term + backURL + currentPage;\n  \n    const response = await axios(url);\n    const images = await response.data;\n  \n    // console.log(images);\n    return images;\n}\n\n// Function for rest a page by new search\nexport function restartPage() {\n  currentPage = 1;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs, currentPage } from '../../main';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\n// Add function for rendering markup when found images\nexport function renderCards(images) {\n  // Test by empty\n  if (images.totalHits !== 0) {\n    // console.log(Math.ceil(images.totalHits / 40));\n    // console.log(currentPage);\n    const markup = images.hits\n      .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<div class=\"photo-card\">\n                  <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n                    <div class=\"info\">\n                      <p class=\"info-item\">\n                        <b>Likes</b>\n                        ${likes}\n                      </p>\n                      <p class=\"info-item\">\n                        <b>Views</b>\n                        ${views}\n                      </p>\n                      <p class=\"info-item\">\n                        <b>Comments</b>\n                        ${comments}\n                      </p>\n                      <p class=\"info-item\">\n                        <b>Downloads</b>\n                        ${downloads}\n                      </p>\n                    </div>\n                  </a>\n                </div>`;\n      })\n      .join('');\n    refs.galleryImages.insertAdjacentHTML('beforeend', markup);\n    if (Math.ceil(images.totalHits / 40) > currentPage) {\n      refs.loadMoreBtn.classList.remove('is-hidden');\n    } else {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      if (currentPage !== 1) {\n        iziToast.show({\n          backgroundColor: 'lightyellow',\n          message: `We're sorry, but you've reached the end of search results`,\n          timeout: 3000,\n          position: 'topRight',\n          transitionIn: 'flipInX',\n          transitionOut: 'flipOutX',\n        });\n      }\n    }\n    lightbox.refresh();\n    if (currentPage === 1) {\n      iziToast.show({\n        backgroundColor: 'lightgreen',\n        message: `Hooray! We found ${images.totalHits} images.`,\n        timeout: 3000,\n        position: 'topRight',\n        transitionIn: 'flipInX',\n        transitionOut: 'flipOutX',\n      });\n    }\n  } else {\n    refs.loadMoreBtn.classList.add('is-hidden');\n    iziToast.show({\n      backgroundColor: '#FD4A3F',\n      message:\n        'Sorry, there are no images matching your search query. Please try again.',\n      timeout: 3000,\n      position: 'topRight',\n      transitionIn: 'flipInX',\n      transitionOut: 'flipOutX',\n    });\n  }\n};","import axios from \"axios\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Import styles\nimport './css/styles.css';\n// Import fetchGallery\nimport { fetchGallery, restartPage } from './partials/js/fetchGallery.js';\nimport { renderCards } from './partials/js/renderCards.js';\n\n// Add/find elements from html\n// Create object with elements\nexport const refs = {\n    searchForm: document.querySelector('.search-form'),\n    galleryImages: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more'),\n};\n\n// Add class to the element loadMoreBtn for hiddening\nrefs.loadMoreBtn.classList.add('is-hidden');\n\n// Personal key for Pixabay API\nexport const KEY_TO_API = '35129314-12d9f6cafbe4df38ad9bc5f6b';\n\n// Add default value\nlet valueTermImages = '';\n// Add default value of a current page 'page='\nexport let currentPage = 1;\n\n// ========== listeners\n// listeners by \"submit\" for form wiht function fetchImages(term) in callback\nrefs.searchForm.addEventListener('submit', searchImages);\n// listeners by \"click\" for button \"Load more\" wiht function onLoadMore() in callback\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\n// ========== function searchImages\nasync function searchImages(evt) {\n    refs.loadMoreBtn.classList.add('is-hidden');\n    // stop reboot page\n    evt.preventDefault();\n    // clear gallary by submit\n    clearGallery();\n    // constant for a inputed term (for serach images)\n    // add method trim()\n    const termImages = evt.currentTarget.elements.searchQuery.value.trim();\n    // console.log(termImages);\n    // check a content of input and show notification\n    if (termImages.trim() === '') {\n      iziToast.show({\n        backgroundColor: 'lightyellow',\n        message: `Empty string`,\n        timeout: 3000,\n        position: 'topRight',\n        transitionIn: 'flipInX',\n        transitionOut: 'flipOutX',\n      });\n      return;\n    }\n    \n    if (valueTermImages !== termImages) {\n        // function for reset page by new termImages\n        restartPage();\n    }\n    valueTermImages = termImages;\n    currentPage = 1;\n\n    try {\n      const gallery = await fetchGallery(termImages, currentPage);\n      renderCards(gallery);\n    } catch (error) {\n        console.log(error);\n    };\n};\n\nfunction clearGallery() {\n    refs.galleryImages.innerHTML = '';\n}\n\nasync function onLoadMore() {\n    // change page of response\n    currentPage += 1;\n    try {\n      const gallery = await fetchGallery(valueTermImages, currentPage);\n      renderCards(gallery);\n    } catch (error) {\n      console.log(error);\n    };\n};"],"names":["fetchGallery","term","currentPage","frontURL","betweenURL","backURL","url","KEY_TO_API","axios","lightbox","SimpleLightbox","renderCards","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","iziToast","valueTermImages","searchImages","onLoadMore","evt","clearGallery","termImages","gallery","error"],"mappings":"owBAQO,eAAeA,EAAaC,EAAMC,EAAa,CAGlD,MAAMC,EAAW,gCACXC,EAAa,MAEbC,EAAU,6EAEVC,EAAMH,EAAWI,EAAaH,EAAaH,EAAOI,EAAUH,EAMlE,OAHe,MADE,MAAMM,EAAMF,CAAG,GACF,IAIlC,CCfA,MAAMG,EAAW,IAAIC,EAAe,YAAY,EAGzC,SAASC,EAAYC,EAAQ,CAElC,GAAIA,EAAO,YAAc,EAAG,CAG1B,MAAMC,EAASD,EAAO,KACnB,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAC1D;AAAA,6BACcL;AAAA,gCACGD,WAAsBE;AAAA;AAAA;AAAA;AAAA,0BAI5BC;AAAA;AAAA;AAAA;AAAA,0BAIAC;AAAA;AAAA;AAAA;AAAA,0BAIAC;AAAA;AAAA;AAAA;AAAA,0BAIAC;AAAA;AAAA;AAAA;AAAA,uBAKnB,EACA,KAAK,EAAE,EACVC,EAAK,cAAc,mBAAmB,YAAaR,CAAM,EACrD,KAAK,KAAKD,EAAO,UAAY,EAAE,EAAIV,EACrCmB,EAAK,YAAY,UAAU,OAAO,WAAW,GAE7CA,EAAK,YAAY,UAAU,IAAI,WAAW,EACtCnB,IAAgB,GAClBoB,EAAS,KAAK,CACZ,gBAAiB,cACjB,QAAS,4DACT,QAAS,IACT,SAAU,WACV,aAAc,UACd,cAAe,UACzB,CAAS,GAGLb,EAAS,QAAO,EACZP,IAAgB,GAClBoB,EAAS,KAAK,CACZ,gBAAiB,aACjB,QAAS,oBAAoBV,EAAO,oBACpC,QAAS,IACT,SAAU,WACV,aAAc,UACd,cAAe,UACvB,CAAO,CAEP,MACIS,EAAK,YAAY,UAAU,IAAI,WAAW,EAC1CC,EAAS,KAAK,CACZ,gBAAiB,UACjB,QACE,2EACF,QAAS,IACT,SAAU,WACV,aAAc,UACd,cAAe,UACrB,CAAK,CAEL,CCrEO,MAAMD,EAAO,CAChB,WAAY,SAAS,cAAc,cAAc,EACjD,cAAe,SAAS,cAAc,UAAU,EAChD,YAAa,SAAS,cAAc,YAAY,CACpD,EAGAA,EAAK,YAAY,UAAU,IAAI,WAAW,EAGnC,MAAMd,EAAa,qCAG1B,IAAIgB,EAAkB,GAEXrB,EAAc,EAIzBmB,EAAK,WAAW,iBAAiB,SAAUG,CAAY,EAEvDH,EAAK,YAAY,iBAAiB,QAASI,CAAU,EAGrD,eAAeD,EAAaE,EAAK,CAC7BL,EAAK,YAAY,UAAU,IAAI,WAAW,EAE1CK,EAAI,eAAc,EAElBC,IAGA,MAAMC,EAAaF,EAAI,cAAc,SAAS,YAAY,MAAM,OAGhE,GAAIE,EAAW,KAAM,IAAK,GAAI,CAC5BN,EAAS,KAAK,CACZ,gBAAiB,cACjB,QAAS,eACT,QAAS,IACT,SAAU,WACV,aAAc,UACd,cAAe,UACvB,CAAO,EACD,MACD,CAMDC,EAAkBK,EAClB1B,EAAc,EAEd,GAAI,CACF,MAAM2B,EAAU,MAAM7B,EAAa4B,EAAY1B,CAAW,EAC1DS,EAAYkB,CAAO,CACpB,OAAQC,EAAP,CACE,QAAQ,IAAIA,CAAK,CACzB,CACA,CAEA,SAASH,GAAe,CACpBN,EAAK,cAAc,UAAY,EACnC,CAEA,eAAeI,GAAa,CAExBvB,GAAe,EACf,GAAI,CACF,MAAM2B,EAAU,MAAM7B,EAAauB,EAAiBrB,CAAW,EAC/DS,EAAYkB,CAAO,CACpB,OAAQC,EAAP,CACA,QAAQ,IAAIA,CAAK,CAEvB,CAAA"}